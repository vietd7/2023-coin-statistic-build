/*! For license information please see FileSaver.js.LICENSE.txt */
var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=e.URL||e.webkitURL||e,o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r=!e.externalHost&&"download"in o,a=e.webkitRequestFileSystem,i=e.requestFileSystem||a||e.mozRequestFileSystem,d=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},s="application/octet-stream",u=0,c=[],f=function(){for(var e=c.length;e--;){var t=c[e];"string"==typeof t?n.revokeObjectURL(t):t.remove()}c.length=0},l=function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){d(e)}}},v=function(n,d){var f,v,w,A=this,S=n.type,p=!1,E=function(){var t=(e.URL||e.webkitURL||e).createObjectURL(n);return c.push(t),t},y=function(){l(A,"writestart progress write writeend".split(" "))},m=function(){if(!p&&f||(f=E()),!v){if(navigator.userAgent.match(/7\.[\d\s\.]+Safari/)&&void 0!==window.FileReader&&n.size<=157286400){var e=new window.FileReader;return e.readAsDataURL(n),e.onloadend=function(){var n=t.createElement("iframe");n.src=e.result,n.style.display="none",t.body.appendChild(n),y()},A.readyState=A.DONE,void(A.savedAs=A.SAVEDASUNKNOWN)}return window.open(f,"_blank"),A.readyState=A.DONE,A.savedAs=A.SAVEDASBLOB,void y()}v.location.href=f},O=function(e){return function(){if(A.readyState!==A.DONE)return e.apply(this,arguments)}},h={create:!0,exclusive:!1};if(A.readyState=A.INIT,d||(d="download"),r){f=E(),t=e.document,(o=t.createElementNS("http://www.w3.org/1999/xhtml","a")).href=f,o.download=d;var N=t.createEvent("MouseEvents");return N.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(N),A.readyState=A.DONE,A.savedAs=A.SAVEDASBLOB,void y()}e.chrome&&S&&S!==s&&(w=n.slice||n.webkitSlice,n=w.call(n,0,n.size,s),p=!0),a&&"download"!==d&&(d+=".download"),(S===s||a)&&(v=e),i?(u+=n.size,i(e.TEMPORARY,u,O((function(e){e.root.getDirectory("saved",h,O((function(e){var t=function(){e.getFile(d,h,O((function(e){e.createWriter(O((function(t){t.onwriteend=function(t){v.location.href=e.toURL(),c.push(e),A.readyState=A.DONE,A.savedAs=A.SAVEDASBLOB,l(A,"writeend",t)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&m()},"writestart progress write abort".split(" ").forEach((function(e){t["on"+e]=A["on"+e]})),t.write(n),A.abort=function(){t.abort(),A.readyState=A.DONE,A.savedAs=A.FAILED},A.readyState=A.WRITING})),m)})),m)};e.getFile(d,{create:!1},O((function(e){e.remove(),t()})),O((function(e){e.code===e.NOT_FOUND_ERR?t():m()})))})),m)})),m)):m()},w=v.prototype,A=function(e,t){return new v(e,t)};return w.abort=function(){var e=this;e.readyState=e.DONE,e.savedAs=e.FAILED,l(e,"abort")},w.readyState=w.INIT=0,w.WRITING=1,w.DONE=2,w.FAILED=-1,w.SAVEDASBLOB=1,w.SAVEDASURI=2,w.SAVEDASUNKNOWN=3,w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null,e.addEventListener("unload",f,!1),A.unload=function(){f(),e.removeEventListener("unload",f,!1)},A}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd?define([],(function(){return saveAs})):"undefined"!=typeof Meteor&&(Meteor.saveAs=saveAs);